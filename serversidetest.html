<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
  <h2> Serverside events test</h2>
  <p id="data"></p>
  <script>
  	const eventSource = new EventSource("/events")
  	eventSource.onmessage = (event) => {
  		console.log("Got message");
  		const target = document.getElementById("data");
  		target.innerHTML = `message: ${event.data}`;
  	};
  	eventSource.addEventListener("update", (event) => {
  		console.log("Got update");
  		const target = document.getElementById("data");
  		target.innerHTML = `message: ${event.data}`;
  	});
	  eventSource.addEventListener("abort", (event) => {
  		console.log(`Got abort: ${JSON.parse(event.data).reason}`);
		eventSource.close();
  	});
  </script>
  </body>
</html>
